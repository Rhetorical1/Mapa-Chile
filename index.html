<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Mapa Did치ctico de Chile</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #map-container {
            width: 100vw;
            height: 100vh;
        }
        #map {
            width: 100%;
            height: 100%;
        }

    </style>
</head>
<body>
    <div id="map-container">
        <div id="map"></div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
    <script>
        const map = L.map('map').setView([-30.0, -70.0], 5);

        // Fondo blanco
        L.rectangle([[-90, -180], [90, 180]], {
            color: '#fff',
            weight: 0,
            fillColor: '#ffffff',
            fillOpacity: 1
        }).addTo(map);

        // Colores graduales por regi칩n: norte (caf칠), centro (verde medio oscuro), sur (verde m치s claro)
        fetch("/static/chile_regiones.geojson")
            .then(res => res.json())
            .then(data => {
                L.geoJSON(data, {
                    style: function (feature) {
                        const region = feature.properties.Region || feature.properties.region || "";
                        let color;
                        if (region.includes("Arica")) {
                            color = "#5A0000"; 
                        } else if(region.includes("Tarapac치")) {
                            color = "#7A0A0A"; 
                        } else if(region.includes("Antofagasta")) {
                            color = "#9C1E1E"; 
                        } else if(region.includes("Atacama")) {
                            color = "#B83232"; 
                        } else if(region.includes("Coquimbo")) {
                            color = "#D14848"; 
                        } else if(region.includes("Valpara칤so")) {
                            color = "#E5675A"; 
                        } else if(region.includes("Metropolitana de Santiago")) {
                            color = "#ED8A6A"; 
                        } else if(region.includes("O'Higgins")) {
                            color = "#F3A96F"; 
                        } else if(region.includes("Maule")) {
                            color = "#F8C97A"; 
                        } else if(region.includes("칌uble")) {
                            color = "#F6DE6F"; 
                        } else if(region.includes("B칤o-B칤o")) {
                            color = "#D6E87B"; 
                        } else if(region.includes("La Araucan칤a")) {
                            color = "#B6EC88";
                        } else if(region.includes("Los R칤os")) {
                            color = "#91E899";
                        } else if(region.includes("Los Lagos")) {
                            color = "#6FD8A5";
                        } else if(region.includes("Ays칠n")) {
                            color = "#4BCB98";
                        } else if(region.includes("Regi칩n de Magallanes y Ant치rtica Chilena")) {
                            color = "#00008B";
                        } else {
                            color = "#CCCCCC";
                        }
                        return {
                            color: "#444",
                            weight: 1,
                            fillColor: color,
                            fillOpacity: 0.7
                        };
                    },
                    onEachFeature: function (feature, layer) {
                        const nombre = feature.properties.Region || feature.properties.region || "Regi칩n";
                        const info = feature.properties.Detalle || nombre;
                        layer.bindPopup(`<strong>${nombre}</strong><br>${info}`);
                    }
                }).addTo(map);
            });

        const regionIcon = L.divIcon({
            className: 'custom-div-icon',
            html: '<div style="font-size: 20px; color: red;">游늸</div>',
            iconSize: [30, 42],
            iconAnchor: [15, 42]
        });
                // Informaci칩n did치ctica por regi칩n (coordenadas aproximadas para los markers)
                const infoRegiones = [
                {
        nombre: "Regi칩n de Arica y Parinacota",
        coords: [-18.4783, -70.3126],
        info:`
        <b>Regi칩n de Arica y Parinacota</b><br>
                    <ul>
                        <li><strong>Divisi칩n Pol칤tico Administrativa:</strong> Provincias: Arica y Parinacota. Comunas: Arica, Camarones, Putre, General Lagos.</li>
                        <li><strong>Econom칤a:</strong> Comercio (Zofri), Agricultura (olivos, tomates), Pesca, Turismo.</li>
                        <li><strong>Ecosistema:</strong> Desierto costero, Altiplano, Bofedales y lagunas altoandinas.</li>
                        <li><strong>Relieve:</strong> Planicies litorales, Cordillera de la Costa, Depresi칩n Intermedia, Cordillera de los Andes.</li>
                    </ul>`
    },
    {
        nombre: "Regi칩n de Tarapac치",
        coords: [-20.2307, -69.755],
        info:`
        <b>Regi칩n de Tarapac치</b><br>
                    <ul>
                        <li><strong>Divisi칩n Pol칤tico Administrativa:</strong> Provincias: Iquique y Tamarugal Comunas: Iquique, Alto Hospicio, Pozo Almonte, Huara, Pica, Cami침a, Colchane. </li>
                        <li><strong>Econom칤a:</strong> Miner칤a (cobre, yodo), Comercio (Zona Franca de Iquique), Pesca, Turismo.</li>
                        <li><strong>Ecosistema:</strong> Desierto costero, Pampa del Tamarugal, Oasis interiores.</li>
                        <li><strong>Relieve:</strong> Planicies litorales, Cordillera de la Costa (Farell칩n Costero), Depresi칩n de los Andes (Pampa del Tamarugal), Cordillera de los Andes.</li>
                    </ul>` 
    },
    {
        nombre: "Regi칩n de Antofagasta",
        coords: [-23.6509, -70.4003],
        info:`
        <b>Regi칩n de Antofagasta</b><br>
                    <ul>
                        <li><strong>Divisi칩n Pol칤tico Administrativa:</strong> Provincias: Antofagasta, El Loa y Tocopilla Comunas: Antofagasta, Mejillones, Sierra Gorda, Taltal, Calama, Ollag칲e, San Pedro de Atacama, Tocopilla, Mar칤a Elena</li>
                        <li><strong>Econom칤a:</strong> Miner칤a (cobre, litio, salitre), Industria, Pesca.</li>
                        <li><strong>Ecosistema:</strong> Desierto de Atacama, Oasis y salares (San Pedro de Atacama, Salar de Atacama), Costa des칠rtica. </li>
                        <li><strong>Relieve:</strong> Planicies litorales, Cordillera de la Costa, Depresi칩n Intermedia (Pampa del Tamarugal en su extremo norte, y desierto), Cordillera de los Andes (volcanes, salares). </li>
                    </ul>`
    },
    {
        nombre: "Regi칩n de Atacama",
        coords: [-27.3668, -70.3316],
        info: `
        <b>Regi칩n de Atacama</b><br>
                    <ul>
                        <li><strong>Divisi칩n Pol칤tico Administrativa:</strong> Provincias: Cha침aral, Copiap칩 y Huasco. Comunas: Cha침aral, Diego de Almagro, Copiap칩, Caldera, Tierra Amarilla, Vallenar, Alto del Carmen, Freirina, Huasco. </li>
                        <li><strong>Econom칤a:</strong> Miner칤a (cobre, oro, hierro), Agricultura (uvas, olivos, frutas), Turismo.</li>
                        <li><strong>Ecosistema:</strong> Desierto de Atacama, Valles transversales, Florecimiento del desierto.</li>
                        <li><strong>Relieve:</strong> Planicies litorales, Cordillera de la Costa (fragmentada por los valles transversales), Valles transversales, Cordillera de los Andes (cumbres elevadas, Ojos del Salado).</li>
                    </ul>
    <img src="/static/img/atacama_laguna.jpg" alt="Laguna Atacama" width="100" style="margin:2px;">
    <img src="/static/img/atacama_paisaje.jpg" alt="Paisaje Atacama" width="100" style="margin:2px;">
    <img src="/static/img/atardecer_luna.jpg" alt="Valle de la Luna" width="100" style="margin:2px;">
    <img src="/static/img/nevado_atacama.jpg" alt="Nevado Atacama" width="100" style="margin:2px;">
  `
    },
    {
        nombre: "Regi칩n de Coquimbo",
        coords: [-30.5986, -71.2069],
        info:`
        <b>Regi칩n de Coquimbo</b><br>
                    <ul>
                        <li><strong>Divisi칩n Pol칤tico Administrativa:</strong> Provincias: Elqui, Limar칤 y Choapa. Comunas: La Serena, Coquimbo, Andacollo, La Higuera, Paihuano, Vicu침a, Ovalle, Combarbal치, Monte Patria, Punitaqui, R칤o Hurtado, Illapel, Canela, Los Vilos, Salamanca.</li>
                        <li><strong>Econom칤a:</strong>Miner칤a (cobre, hierro), Agricultura (frutas, vid para pisco, olivos), Pesca y acuicultura, Turismo (astroturismo).</li>
                        <li><strong>Ecosistema:</strong>: Semi치rido, Valles transversales con vegetaci칩n xer칩fita, Estepa.</li>
                        <li><strong>Relieve:</strong>Planicies litorales, Cordillera de la Costa (fragmentada), Valles transversales (r칤os Elqui, Limar칤, Choapa), Cordillera de los Andes (m치s baja y erosionada).</li>
                    </ul>`
    },
    {
        nombre: "Regi칩n de Valpara칤so",
        coords: [-33.0472, -71.6127],
        info:`
        <b>Regi칩n de Valpara칤so</b><br>
                    <ul>
                        <li><strong>Divisi칩n Pol칤tico Administrativa:</strong> Provincias: Valpara칤so, Isla de Pascua, Los Andes, Petorca, Quillota, San Antonio, San Felipe de Aconcagua y Marga Marga. Comunas: Valpara칤so, Vi침a del Mar, Conc칩n, Quintero, Puchuncav칤, Casablanca, Juan Fern치ndez, Isla de Pascua, Los Andes, Calle Larga, Rinconada, San Esteban, La Ligua, Cabildo, Papudo, Petorca, Quillota, Calera, Hijuelas, La Cruz, Nogales, San Antonio, Cartagena, El Quisco, El Tabo, Santo Domingo, Algarrobo, San Felipe, Catemu, Llay-Llay, Panquehue, Putaendo, Santa Mar칤a, Quilpu칠, Villa Alemana, Limache, Olmu칠. </li>
                        <li><strong>Econom칤a:</strong> Actividad portuaria (Valpara칤so, San Antonio), Turismo, Agricultura (palta, frutas, vino), Industria (refiner칤a).</li>
                        <li><strong>Ecosistema:</strong> Mediterr치neo (predominante), Bosque escler칩filo, Zona costera.</li>
                        <li><strong>Relieve:</strong> Planicies litorales (estrechas), Cordillera de la Costa (m치s elevada y compacta que en el norte), Depresi칩n Intermedia (valle del Aconcagua), Cordillera de los Andes (Aconcagua, Portillo).</li>
                    </ul>`
    },
    {
        nombre: "Regi칩n Metropolitana de Santiago",
        coords: [-33.4489, -70.6693],
        info:`
        <b>Regi칩n Metropolitana de Santiago</b><br>
                    <ul>
                        <li><strong>Divisi칩n Pol칤tico Administrativa:</strong> Provincias: Santiago, Cordillera, Chacabuco, Maipo, Melipilla y Talagante. Comunas: Santiago, Providencia, Las Condes, Vitacura, 칌u침oa, La Florida, Maip칰, Puente Alto, etc. (37 comunas en total). </li>
                        <li><strong>Econom칤a:</strong> Servicios (financieros, comerciales, tur칤sticos), Industria, Comercio, Agricultura (horticultura, frutales en las zonas rurales).</li>
                        <li><strong>Ecosistema:</strong> Mediterr치neo, Bosque escler칩filo (en las zonas precordilleranas), 츼rea urbana.</li>
                        <li><strong>Relieve:</strong> Depresi칩n Intermedia (Cuenca de Santiago), Cord칩n de Chacabuco (norte), Cordillera de la Costa (Cerros de Chena, Angostura de Paine), Cordillera de los Andes (Macizo Andino).</li>
                    </ul>`
    },
    {
        nombre: "Regi칩n de O'Higgins",
        coords: [-34.1708, -70.7405],
        info:`
        <b>Regi칩n de O췂Higgins</b><br>
                    <ul>
                        <li><strong>Divisi칩n Pol칤tico Administrativa:</strong> Provincias: Cachapoal, Colchagua y Cardenal Caro. Comunas: Rancagua, Machal칤, Graneros, San Francisco de Mostazal, etc. (33 comunas en total).</li>
                        <li><strong>Econom칤a:</strong> Miner칤a (El Teniente, cobre), Agricultura (frutales, vid, arroz), Agroindustria.</li>
                        <li><strong>Ecosistema:</strong> Mediterr치neo, Bosque escler칩filo, Zonas h칰medas costeras.</li>
                        <li><strong>Relieve:</strong> Planicies litorales, Cordillera de la Costa (m치s baja y suave), Depresi칩n Intermedia (Valle Central, ancho y f칠rtil), Cordillera de los Andes (m치s baja).</li>
                    </ul>`
    },
    {
        nombre: "Regi칩n del Maule",
        coords: [-35.4232, -71.6541],
        info:`
        <b>Regi칩n del Maule</b><br>
                    <ul>
                        <li><strong>Divisi칩n Pol칤tico Administrativa:</strong> Provincias: Curic칩, Talca, Linares y Cauquenes. Comunas: Talca, Curic칩, Linares, Cauquenes, etc. (30 comunas en total). </li>
                        <li><strong>Econom칤a:</strong> Agricultura (vid, frutales, cereales, remolacha), Silvicultura, Industri, vitivin칤cola, Generaci칩n de energ칤a (hidroel칠ctrica).</li>
                        <li><strong>Ecosistema:</strong> Mediterr치neo y Templado, Bosque escler칩filo, Bosque caducifolio.</li>
                        <li><strong>Relieve:</strong> Planicies litorales, Cordillera de la Costa (m치s baja y con presencia de la Cordillera de la Costa), Depresi칩n Intermedia (Valle Central, amplio), Cordillera de los Andes (volcanes, lagos).</li>
                    </ul>`
    },
    {
        nombre: "Regi칩n de 칌uble",
        coords: [-36.605, -71.995],
        info:`
        <b>Regi칩n de 칌uble</b><br>
                    <ul>
                        <li><strong>Divisi칩n Pol칤tico Administrativa:</strong> Provincias: Diguill칤n, Punilla e Itata. Comunas: Chill치n, San Carlos, Quirihue, Bulnes, Coelemu, El Carmen, Yungay, etc. (21 comunas en total).</li>
                        <li><strong>Econom칤a:</strong> Agricultura (cereales, frutales, legumbres), Silvicultura, Ganader칤a, Turismo.</li>
                        <li><strong>Ecosistema:</strong> Templado c치lido con estaci칩n seca prolongada, Bosque caducifolio, Zona precordillerana andina.</li>
                        <li><strong>Relieve:</strong> Planicies litorales, Cordillera de la Costa (m치s baja), Depresi칩n Intermedia (Valle Central), Cordillera de los Andes (volcanes como Nevados de Chill치n).</li>
                    </ul>`
    },
    {
        nombre: "Regi칩n del Biob칤o",
        coords: [-37.4703, -72.353],
        info:`
        <b>Regi칩n del Biob칤o</b><br>
                    <ul>
                        <li><strong>Divisi칩n Pol칤tico Administrativa:</strong> Provincias: Concepci칩n, Arauco y Biob칤o. Comunas: Concepci칩n, Talcahuano, Chill치n Viejo, Los 츼ngeles, Lebu, etc. (33 comunas en total).</li>
                        <li><strong>Econom칤a:</strong> Industria (sider칰rgica, petroqu칤mica, celulosa y papel), Silvicultura, Pesca y acuicultura, Agricultura, Servicios.</li>
                        <li><strong>Ecosistema:</strong> Templado lluvioso, Bosque nativo (roble, raul칤, coihue), Plantaciones forestales (pino, eucalipto).</li>
                        <li><strong>Relieve:</strong> Planicies litorales (m치s amplias en algunos sectores), Cordillera de la Costa (interrumpida por el r칤o Biob칤o), Depresi칩n Intermedia (Valle Central), Cordillera de los Andes (volcanes, lagos).</li>
                    </ul>`
    },
    {
        nombre: "Regi칩n de La Araucan칤a",
        coords: [-38.7359, -72.5904],
        info:`
        <b>Regi칩n de La Araucan칤a</b><br>
                    <ul>
                        <li><strong>Divisi칩n Pol칤tico Administrativa:</strong> Provincias: Caut칤n y Malleco. Comunas: Temuco, Padre Las Casas, Angol, Villarrica, Puc칩n, etc. (32 comunas en total).</li>
                        <li><strong>Econom칤a:</strong> Agricultura (trigo, avena, papas), Silvicultura, Ganader칤a, Turismo (lagos, volcanes).</li>
                        <li><strong>Ecosistema:</strong> Templado lluvioso, Bosque nativo (roble, coihue, araucaria), Lagos y volcanes.</li>
                        <li><strong>Relieve:</strong> Planicies litorales, Cordillera de la Costa (m치s baja), Depresi칩n Intermedia (Valle Central), Cordillera de los Andes (volcanes como Llaima, Villarrica; numerosos lagos).</li>
                    </ul>`
    },
    {
        nombre: "Regi칩n de Los R칤os",
        coords: [-39.8146, -72.3152],
        info:`
        <b>Regi칩n de Los R칤os</b><br>
                    <ul>
                        <li><strong>Divisi칩n Pol칤tico Administrativa:</strong> Provincias: Valdivia y Ranco. Comunas: Valdivia, La Uni칩n, Futrono, Panguipulli, R칤o Bueno, etc. (12 comunas en total).</li>
                        <li><strong>Econom칤a:</strong> Silvicultura, Turismo (ecoturismo, lagos), Agricultura (leche, carne), Servicios.</li>
                        <li><strong>Ecosistema:</strong> Templado lluvioso (clima oce치nico), Bosque valdiviano (selva fr칤a), Lagos y r칤os.</li>
                        <li><strong>Relieve:</strong> Planicies litorales, Cordillera de la Costa (Cordillera Pelada), Depresi칩n Intermedia (cubierta por glaciares en el pasado), Cordillera de los Andes (lagos de origen glacial, volcanes).</li>
                    </ul>`
    },
    {
        nombre: "Regi칩n de Los Lagos",
        coords: [-41.4734, -72.9443],
        info:`
        <b>Regi칩n de Los Lagos</b><br>
                    <ul>
                        <li><strong>Divisi칩n Pol칤tico Administrativa:</strong> Provincias: Osorno, Llanquihue, Chilo칠 y Palena. Comunas: Puerto Montt, Osorno, Castro, Ancud, Chait칠n, Puerto Varas, etc. (30 comunas en total).</li>
                        <li><strong>Econom칤a:</strong> Acuicultura (salm칩n, mejillones), Ganader칤a (producci칩n de leche y carne), Turismo (lagos, Chilo칠), Silvicultura.</li>
                        <li><strong>Ecosistema:</strong> Templado lluvioso, Bosque siempreverde (alerce, coihue), Lagos y archipi칠lagos.</li>
                        <li><strong>Relieve:</strong> Planicies litorales, Cordillera de la Costa (fragmentada, con presencia de la Isla de Chilo칠), Depresi칩n Intermedia (relieve de morrenas y cuencas lacustres), Cordillera de los Andes (numerosos lagos de origen glacial, volcanes como Osorno, Calbuco).</li>
                    </ul>`
    },
    {
        nombre: "Regi칩n de Ays칠n",
        coords: [-45.5734, -72.0683],
        info:`
        <b>Regi칩n de Ays칠n</b><br>
                    <ul>
                        <li><strong>Divisi칩n Pol칤tico Administrativa:</strong> Provincias: Coyhaique, Ays칠n, General Carrera y Capit치n Prat. Comunas: Coyhaique, Puerto Ays칠n, Chile Chico, Cochrane, etc. (10 comunas en total).</li>
                        <li><strong>Econom칤a:</strong> Ganader칤a (ovina, bovina), Pesca, Acuicultura (salm칩n), Turismo (parques nacionales, glaciares).</li>
                        <li><strong>Ecosistema:</strong> Templado fr칤o lluvioso, Bosque siempreverde, Estepa patag칩nica (al este), Campos de Hielo Norte y Sur.</li>
                        <li><strong>Relieve:</strong> Cordillera de la Costa (reducida a islas y fiordos), Depresi칩n Intermedia (no existe como tal, se reemplaza por la Cordillera Patag칩nica), Cordillera de los Andes (Andes Patag칩nicos, con fiordos, canales, glaciares), Planicies orientales (estepa).</li>
                    </ul>`
    },
    {
        nombre: "Regi칩n de Magallanes y la Ant치rtica Chilena",
        coords: [-53.1638, -70.9171],
        info:`
        <b>Regi칩n de Magallanes y la Ant치rtica Chilena</b><br>
                    <ul>
                        <li><strong>Divisi칩n Pol칤tico Administrativa:</strong> Provincias: Magallanes, Tierra del Fuego, 칔ltima Esperanza y Ant치rtica Chilena. Comunas: Punta Arenas, Puerto Natales, Porvenir, Cabo de Hornos, etc. (11 comunas en total).</li>
                        <li><strong>Econom칤a:</strong> Petr칩leo y gas, Ganader칤a (ovina), Pesca, Turismo (Parque Nacional Torres del Paine, cruceros), Actividad portuaria.</li>
                        <li><strong>Ecosistema:</strong> Estepa patag칩nica, Bosque andino patag칩nico, Tundra (en el extremo sur e islas), Glaciares y campos de hielo.</li>
                        <li><strong>Relieve:</strong> Cordillera de los Andes (fragmentada, transform치ndose en islas), Planicies patag칩nicas (estepa), Archipi칠lagos y fiordos, Grandes cuerpos de agua (Estrecho de Magallanes, Beagle), Territorio ant치rtico.</li>
                    </ul>`
    }
];
    
                // A침adir markers con popup para cada regi칩n
                infoRegiones.forEach(region => {
                    L.marker(region.coords).addTo(map)
                        .bindPopup(region.info)
                        .openPopup();
                });
    </script>
</body>
</html>
